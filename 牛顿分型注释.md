
# 前置方法
- `poly(x, coefs)`：这是一个多项式函数，它接受一个数值`x`和一个系数列表`coefs`，然后返回多项式在`x`处的值。多项式的形式为 `coefs[0]*x^0 + coefs[1]*x^1 + coefs[2]*x^2 + ...`。

- `dpoly(x, coefs)`：这是多项式函数的导数，它也接受一个数值`x`和一个系数列表`coefs`，然后返回多项式在`x`处的导数值。

- `roots_to_coefficients(roots)`：这个函数接受一个根的列表`roots`，然后返回对应的多项式系数。这里使用了组合数学和numpy的乘积函数。
这是一个用于根据根生成系数的函数，它接受一个根的列表roots作为参数，返回一个系数列表coefs，使得f(x) = (x - roots[0]) * (x - roots[1]) * … * (x - roots[n-1])

- `find_root(func, dfunc, seed=complex(1, 1), tol=1e-8, max_steps=100)`：这个函数使用牛顿法来寻找给定函数`func`的根。它还需要一个导数函数`dfunc`，一个初始猜测值（种子）`seed`，一个容忍误差`tol`，以及最大迭代次数`max_steps`。如果连续两次迭代的结果之间的差小于容忍误差，或者达到最大迭代次数，则停止迭代。

- `coefficients_to_roots(coefs)`：这个函数接受一个系数列表`coefs`，然后返回对应的多项式根。
这是一个用于根据系数生成根的函数，它使用`find_root`函数运用牛顿法来逐个寻找根。它接受一个系数列表coefs作为参数，返回一个根列表roots，从而解得方程$coefs[0] + coefs[1] * x + coefs[2] * x^2 + … + coefs[n] * x^n = 0$

# `NewtonFractal`
这段代码定义了一个名为 `NewtonFractal` 的类，它是 `VMobject` 类的子类。这个类用于创建和操作牛顿分形图像。

类的属性包括：
- `shader_folder`：着色器文件夹的名称。
- `shader_dtype`：着色器数据类型。
- `colors`：分形图像的颜色。
- `coefs`：多项式的系数。
- `scale_factor`：缩放因子。
- `offset`：偏移量。
- `n_steps`：迭代步数。
- `julia_highlight`：朱利亚高亮值。
- `max_degree`：最大度数。
- `saturation_factor`：饱和度因子。
- `opacity`：透明度。
- `black_for_cycles`：是否为循环设置黑色背景。
- `is_parameter_space`：是否为参数空间。

类的方法包括：
- `__init__()`：初始化方法，用于设置对象的初始状态。
- `init_data()`：初始化数据，设置点的位置。
- `init_uniforms()`：初始化统一变量，设置颜色、高亮、系数、缩放、偏移、步数、饱和度和透明度等属性。
- 以及一系列的 `set_` 方法，用于设置各种属性。

这个类主要用于创建和操作牛顿分形图像，通过改变各种属性来改变分形图像的外观。例如，可以通过改变颜色、透明度、饱和度等来改变分形图像的颜色；可以通过改变系数来改变分形图像的形状；可以通过改变缩放和偏移来改变分形图像的大小和位置等。这个类提供了一种灵活且强大的方式来创建和操作牛顿分形图像。


这个PYTHON代码定义了一个名为NewtonFractal的类，它是VMobject的子类，用于创建和显示牛顿分形图像。牛顿分形是一种使用牛顿法求解复数多项式方程根的方法，根据不同的根和迭代次数给平面上的点着色。这个类的属性和方法有：

- shader_folder: 一个字符串，表示存放着色器文件的文件夹的名称，用于渲染分形图像。
- shader_dtype: 一个列表，表示着色器数据类型，包含一个元组，元组中有三个元素：("point", np.float32, (3,))，表示每个点的数据是一个包含三个浮点数的数组，分别表示点的x, y, z坐标。
- colors: 一个列表，表示用于着色不同根的颜色，使用ROOT_COLORS_DEEP常量定义。
- coefs: 一个列表，表示复数多项式方程的系数，从最高次到最低次排列，例如[1.0, -1.0, 1.0, 0.0, 0.0, 1.0]表示方程z^5 - z^4 + z^2 + 1 = 0。
- scale_factor: 一个浮点数，表示分形图像的缩放因子，用于调整图像的大小。
- offset: 一个数组，表示分形图像的偏移量，用于调整图像的位置。
- n_steps: 一个整数，表示牛顿法迭代求解根的最大步数，用于控制图像的精度和效果。
- julia_highlight: 一个浮点数，表示朱利亚集高亮效果的强度，用于在分形图像中突出显示朱利亚集的边界。
- max_degree: 一个整数，表示复数多项式方程的最大次数，用于限制方程的复杂度。
- saturation_factor: 一个浮点数，表示分形图像的饱和度因子，用于调整图像的颜色饱和度。
- opacity: 一个浮点数，表示分形图像的透明度，用于调整图像的可见度。
- black_for_cycles: 一个布尔值，表示是否使用黑色来着色那些在迭代过程中出现周期性行为的点，用于显示分形图像中的奇异点。
- is_parameter_space: 一个布尔值，表示是否将分形图像视为参数空间，用于在参数空间中显示不同系数对应的分形图像。

这个类有以下方法：

- __init__(self, plane, ** kwargs): 这是类的构造方法，接受一个plane对象作为参数，表示要在哪个平面上显示分形图像，并使用**kwargs传递其他属性值。这个方法调用了父类VMobject的__init__方法，并使用replace方法将自身替换为plane对象，并设置stretch为True。
- init_data(self): 这是类的初始化数据方法，设置了自身的points属性为[UL, DL, UR, DR]四个点，表示平面上左上、左下、右上、右下四个角落的位置。
- init_uniforms(self): 这是类的初始化统一变量方法，调用了父类VMobject的init_uniforms方法，并使用set_colors, set_julia_highlight, set_coefs, set_scale, set_offset, set_n_steps, set_saturation_factor, set_opacity等方法设置了自身的uniforms属性中各个统一变量的值。统一变量是一种在着色器程序中使用的变量类型，它们在所有顶点或片段中保持不变。这些统一变量包括了颜色、高亮、系数、根、缩放、偏移、步数、饱和度、透明度等信息。
- set_colors(self, colors): 这是类的设置颜色方法，接受一个颜色列表作为参数，并更新自身的uniforms属性中的colorn变量的值，其中n是从0到最大根数的整数，colorn是一个包含四个浮点数的数组，表示颜色的RGBA值。这个方法使用了color_to_rgba函数将颜色转换为RGBA值。这个方法返回自身对象，以便进行链式调用。
- set_julia_highlight(self, value): 这是类的设置朱利亚集高亮方法，接受一个浮点数作为参数，并更新自身的uniforms属性中的julia_highlight变量的值。这个方法返回自身对象，以便进行链式调用。
- set_coefs(self, coefs, reset_roots=True): 这是类的设置系数方法，接受一个系数列表和一个布尔值作为参数，并更新自身的uniforms属性中的coefn变量的值，其中n是从0到最大次数的整数，coefn是一个包含两个浮点数的数组，表示复数系数的实部和虚部。如果reset_roots为True，则调用set_roots方法根据系数计算并设置根的值，否则不改变根的值。这个方法使用了complex函数将系数转换为复数。这个方法返回自身对象，以便进行链式调用。
- set_roots(self, roots, reset_coefs=True): 这是类的设置根方法，接受一个根列表和一个布尔值作为参数，并更新自身的uniforms属性中的n_roots和rootn变量的值，其中n_roots是一个浮点数，表示根的个数，rootn是一个包含两个浮点数的数组，表示复数根的实部和虚部。如果reset_coefs为True，则调用set_coefs方法根据根计算并设置系数的值，否则不改变系数的值。这个方法使用了complex函数将根转换为复数。这个方法返回自身对象，以便进行链式调用。
- set_scale(self, scale_factor): 这是类的设置缩放方法，接受一个浮点数作为参数，并更新自身的uniforms属性中的scale_factor变量的值。这个方法返回自身对象，以便进行链式调用。
- set_offset(self, offset): 这是类的设置偏移方法，接受一个数组作为参数，并更新自身的uniforms属性中的offset变量的值。这个方法返回自身对象，以便进行链式调用。
- set_n_steps(self, n_steps): 这是类的设置步数方法，接受一个整数作为参数，并更新自身的uniforms属性中的n_steps变量的值。这个方法返回自身对象，以便进行链式调用。
- set_saturation_factor(self, saturation_factor): 这是类的设置饱和度方法，接受一个浮点数作为参数，并更新自身的uniforms属性中的saturation_factor变量的值。这个方法返回自身对象，以便进行链式调用。
- set_opacities(self, *opacities): 这是类的设置透明度方法，接受若干个浮点数作为参数，并更新自身的uniforms属性中colorn变量中第四个元素（即透明度）的值。这个方法返回自身对象，以便进行链式调用。
- set_opacity(self, opacity, recurse=True): 这是类的设置透明度方法，接受一个浮点数和一个布尔值作为参数，并调用set_opacities方法将所有颜色的透明度设置为相同的值。如果recurse为True，则还会递归地调用子对象（如果有）的set_opacity方法。这个方法返回自身对象，以便进行链式调用。


